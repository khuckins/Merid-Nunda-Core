// Spell Passives

new entry "AGTT_Passive_MeridiasGrasp"
type "PassiveData"
data "DisplayName" "7ee1c2dc-7edc-4c51-ba5a-76615e7a47d2"
data "Description" "2d584611-483d-4021-8b38-e59295677afa;1"
data "DescriptionParams" "TemporaryHP(1d6/2)"
data "Conditions" "IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" TemporaryHP(1d6/2)"
data "StatsFunctorContext" "OnAttacked"

new entry "AGTT_Passive_Spellstrike"
type "PassiveData"
data "DisplayName" "309dcff6-6028-4310-bfed-f25d36a5ec96"
data "Description" "6b1ad082-8a34-4532-9bef-3974e56370d9"
data "StatsFunctors" "Force(2.5);"
data "StatsFunctorContext" "OnAttack"

new entry "AGTT_Passive_MagicAura_Advantage"
type "PassiveData"
data "DisplayName" "9afeeafc-7d90-426b-9a32-0792e6b884b2"
data "StatsFunctorContext" "OnSpellCast"
data "StatsFunctors" "Advantage(AttackRoll)"

new entry "AGTT_Passive_MagicAura_Healing"
type "PassiveData"
data "DisplayName" "fe610d21-c3e5-47d7-b903-426c44dcd8a9"
data "StatsFunctorContext" "OnHeal"
data "StatsFunctors" "RegainHealth(1)"

new entry "AGTT_Passive_MagicAura_Damage"
type "PassiveData"
data "DisplayName" "0bdd503c-cdff-42ae-a868-3fb369b1a4ab"
data "StatsFunctorContext" "OnAttack"
data "StatsFunctors" "DealDamage(1d4, Psychic)"
data "Conditions" "context.HitDescription.AttackType==(AttackType.RangedSpellAttack or AttackType.MeleeSpellAttack) and HasDamageEffectFlag(DamageFlags.Hit)"

new entry "AGTT_Passive_Razorskin"
type "PassiveData"
data "DisplayName" "f64876f6-8b2e-4eaa-8ae0-1919a025552c"
data "StatsFunctorContext" "OnAttacked"
data "Conditions" "context.HitDescripton.AttackType==(AttackType.MeleeWeaponAttack or AttackType.MeleeUnarmedAttack or AttackType.MeleeSpellAttack)"
data "StatsFunctors" "DealDamage(2d4/2, Slashing);IF(not SavingThrow(Ability.Dexterity, 15)):DealDamage(2d4/2, Slashing)"

// Class Passives

// Mage - Minor Feats
new entry "AGTT_MageMinorFeat_Expertise_Arcana"
type "PassiveData"
data "DisplayName" "9b723843-643d-4b21-bb83-c767db0f67af"
data "Description" "dbd7277c-849d-4c8a-aca9-d72b4c485622"
data "Boosts" "Skill(Arcana, 1)"

new entry "AGTT_MageMinorFeat_Expertise_History"
type "PassiveData"
data "DisplayName" "48f1adbf-8b13-4d64-8db9-1faed6e3b5a8"
data "Description" "b63c020f-45cf-402b-8d91-0fa3749e4bc0"
data "Boosts" "Skill(History, 1)"

new entry "AGTT_MageMinorFeat_Expertise_Insight"
type "PassiveData"
data "DisplayName" "80a11ddb-428e-403f-bed1-cd3da25f5b84"
data "Description" "bf73ebe6-247d-4594-9325-8f30d3760d0a"
data "Boosts" "Skill(Insight, 1)"

new entry "AGTT_MageMinorFeat_Expertise_Investigation"
type "PassiveData"
data "DisplayName" "1dacf4cf-fdcf-4eaa-b67b-e3c6cf9071cb"
data "Description" "2e7f23b7-f30b-4d58-9cdd-cc0574a48c6d"
data "Boosts" "Skill(Investigation, 1)"

new entry "AGTT_MageMinorFeat_Expertise_Medicine"
type "PassiveData"
data "DisplayName" "7f1094e2-25c7-406f-999b-ff09566da3c2"
data "Description" "700b319e-3adc-4595-9cf1-bba3fd433865"
data "Boosts" "Skill(Medicine, 1)"

new entry "AGTT_MageMinorFeat_IntensiveTraining_L1"
type "PassiveData"
data "DisplayName" "cecf4bde-0521-451f-aa01-429ec92b2d69"
data "Description" "4422694f-7c49-4c35-84c0-881341d1a2eb"
data "Boosts" "ActionResource(SpellSlot,1,1)"
data "Conditions" "IsTagged('AGTT_CLASS_MAGE')"

new entry "AGTT_MageMinorFeat_IntensiveTraining_L2"
type "PassiveData"
data "DisplayName" "cecf4bde-0521-451f-aa01-429ec92b2d69"
data "Description" "9ece615b-6b85-48c1-ba90-fbe01bb9878f"
data "Boosts" "ActionResource(SpellSlot,1,2)"

new entry "AGTT_MageMinorFeat_IntensiveTraining_L3"
type "PassiveData"
data "DisplayName" "cecf4bde-0521-451f-aa01-429ec92b2d69"
data "Description" "b7993826-af5c-4411-8ab3-83ac5bb10d3a"
data "Boosts" "ActionResource(SpellSlot,1,3)"

new entry "AGTT_MageMinorFeat_ArcaneHaste"
type "PassiveData"
data "DisplayName" "d3e34020-2315-48fa-8516-ad0460417637"
data "Description" "bc9ea247-3875-43ef-9500-6c3fa1bc25b5"
data "StatsFunctors" "UnlockSpell(Shout_Disengage_BonusAction);UnlockSpell(Shout_Hide_BonusAction);UnlockSpell(Shout_Dash_BonusAction)"
data "Conditions" "HasActionResource('BonusActionPoint', 1, 0, false, context.source)"
data "StatsFunctorContext" "OnCast"
data "Conditions" "IsTagged('AGTT_CLASS_MAGE');"

new entry "AGTT_MageMinorFeat_ArcaneCombatant_Archery"
type "PassiveData"
using "FightingStyle_Archery"
data "DisplayName" "86c02a73-9d7a-4130-884a-74922968e568"

new entry "AGTT_MageMinorFeat_ArcaneCombatant_Defense"
type "PassiveData"
using "FightingStyle_Defense"
data "DisplayName" "65bb5399-97c4-465b-b8de-642f9a1f2ef5"

new entry "AGTT_MageMinorFeat_ArcaneCombatant_Dueling"
type "PassiveData"
using "FightingStyle_Dueling"
data "DisplayName" "f0090666-c38c-422d-aa26-59a7d96889a9"

new entry "AGTT_MageMinorFeat_ArcaneCombatant_GreatWeaponFighting"
type "PassiveData"
using "FightingStyle_GreatWeaponFighting"
data "DisplayName" "2cd30f01-8ddd-4dc5-8a89-3e6f72fe75e7"

new entry "AGTT_MageMinorFeat_ArcaneCombatant_Protection"
type "PassiveData"
using "FightingStyle_Protection"
data "DisplayName" "50ac0c76-2522-4e4f-94f6-3532ca647905"

new entry "AGTT_MageMinorFeat_ArcaneCombatant_TwoWeaponFighting"
type "PassiveData"
using "FightingStyle_TwoWeaponFighting"
data "DisplayName" "c02c8b5d-c573-44b7-b958-67858700eb2e"

// Savant likely not currently possible, as it would require halving the LearnSpellCostPerLevel key
// new entry "AGTT_MageMinorFeat_Savant"

new entry "AGTT_MageMinorFeat_AdeptCasting_Damage"
type "PassiveData"
data "DisplayName" "3ed90aaf-58a3-40a6-a728-8d72c034b42e"
data "Description" "60b815c9-0929-4a0d-8581-3ff9ae12fef6"
data "StatsFunctorContext" "OnAttack"
data "StatsFunctors" "IF(context.HitDescription.AttackType==(AttackType.RangedSpellAttack or AttackType.MeleeSpellAttack)):AddProficiencyToDamage"

// This needs to change - as set up here, it would affect anyone you cast on. Not good.
new entry "AGTT_MageMinorFeat_AdeptCasting_Save"
type "PassiveData"
data "DisplayName" "e649f8d2-586b-4295-a3a1-b4e9ba7d9af2"
data "Description" "72451da8-67d5-4f50-84fd-dbb37e583b4d"
data "StatsFunctorContext" "OnSpellCast"
data "StatsFunctors" "IF(context.Target):ApplyStatus(context.Target, AGTT_STATUS_ADEPTCASTINGDEBUFF, 1)"

new entry "AGTT_MageMinorFeat_ArcaneWard"
type "PassiveData"
using "ArcaneWard"
data "Conditions" "context.HitDescription.SpellSchool == SpellSchool.Alteration and context.HitDescription.SpellLevel > 0"

new entry "AGTT_MageMinorFeat_ImprovedMinorIllusion"
type "PassiveData"
data "DisplayName" "591868b5-30b1-4a04-80c5-80d900f1bbff"
data "Description" "e9e877ab-c962-49e5-9b5f-0b5679ae7e6a"
data "Boosts" "UnlockSpell(AGTT_Target_ImprovedMinorIllusion)"

new entry "AGTT_MageMinorFeat_Portent"
type "PassiveData"
data "DisplayName" "91327a78-4fe8-4110-88bf-9b8bc0df4b67"
data "Description" "de8b9452-480a-43cc-8093-a37eac62cde2"
data "Boosts" "UnlockSpell(AGTT_Shout_Portent)"

// Rogue: Nightblade
new entry "AGTT_Nightblade_Verisimilitude"
type "PassiveData"
data "DisplayName" "31b81a78-42d7-4bde-86e2-0d1eb227a5d9"
data "Description" "b201c30e-b898-46be-9923-acfe2210905b"
data "Boosts" "Advantage(Skill, SleightOfHand);Skill(Intimidation, 1);Skill(Performance, 1);"
